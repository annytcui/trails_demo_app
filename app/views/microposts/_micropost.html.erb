<li id="micropost-<%= micropost.id %>">
  <%= link_to gravatar_for(micropost.user, size: 55), micropost.user %>
  <span class="user">
    <%= link_to micropost.user.name, micropost.user %>
  </span>
  <span class="content">
    <%= micropost.content %>
    <%= image_tag micropost.picture.url if micropost.picture? %>
  </span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago
    <% if current_user?(micropost.user) %>
      <%= link_to "delete", micropost, method: :delete,
          data: { confirm: "Are you sure you want to delete this micropost?" }  %>
    <% end %>
  </span>

  <!-- like and comment spans -->
  <div class="comments-likes">
    <span id="likes-count-mic-<%= micropost.id %>">
      <% if current_user.liked?(micropost) %>
        <i class="fas fa-thumbs-up"></i>
      <% else %>
        <i class="far fa-thumbs-up"></i>
      <% end %>
      <%= pluralize(micropost.likes.count, "like") %>
    </span>

    <span class="comments-count" id="comments-count-mic-<%= micropost.id %>">
      <i class="far fa-comments"></i>
      <%= pluralize(micropost.comments.count, "comment") %>
    </span>
  </div>

  <!-- comment body -->
  <% @micropost_id = micropost.id %>
  <div id="comments-mic-<%= micropost.id %>">
    <div id="comments-body-mic-<%= micropost.id %>">
      <% if micropost.comments.any? %>
        <ol class="comments">
          <%= render micropost.comments %>
        </ol>
      <% end %>
    </div>
    <div class="comment-form">
      <%= render 'shared/comment_form' %>
    </div>
  </div>
</li>

<!-- Add script to toggle comments -->
<script type="text/javascript">
  $('#comments-count-mic-<%= micropost.id %>').on('click', function() {
    $('#comments-mic-<%= micropost.id %>').toggle();
  });
</script>
